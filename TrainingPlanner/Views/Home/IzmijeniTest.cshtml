@model TrainingPlanner.Test

@{
    Layout = "~/Views/_LayoutWithCSS.cshtml";
}

@using (Html.BeginForm("IzmijeniTest", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Test</legend>
        
        @Html.HiddenFor(x => x.TestId)
        @Html.HiddenFor(x => x.ClanId)
        <div class="editor-label"
            >@Html.LabelFor(model => model.Slika)
        </div>

        <div class="editor-field">
            @if (Model.Slika.Count == 0)
            {
                @:None
            } else {
                foreach(var item in Model.Slika)
                {
                    <img width="150" height="150" src ="@Url.Content(String.Format("~/Content/Slike/{0}", item.SlikaIme))" />
                    <div>@Html.ActionLink("IzbrisiSliku", "IzbrisiSliku", "Home", new { id = Model.TestId, slika = item.SlikaId }, null)</div>
                }
            }
            <div>Dodaj slike: <input type="file" name ="slike" value="" multiple="multiple"/></div>
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.DatumTesta)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.DatumTesta, "{0:d}", new { @class = "dateInput" })
            @Html.ValidationMessageFor(model => model.DatumTesta)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Ergometar)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Ergometar)
            @Html.ValidationMessageFor(model => model.Ergometar)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Zgibovi)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Zgibovi)
            @Html.ValidationMessageFor(model => model.Zgibovi)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Sklekovi)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Sklekovi)
            @Html.ValidationMessageFor(model => model.Sklekovi)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Trbusnjaci)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Trbusnjaci)
            @Html.ValidationMessageFor(model => model.Trbusnjaci)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Cucnjevi)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Cucnjevi)
            @Html.ValidationMessageFor(model => model.Cucnjevi)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </div>

        <p>
            <input type="submit" value="Izmijeni test" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Natrag na popis clanova", "Index")
</div>