@model TrainingPlanner.Models.TreningDataModel

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div id="contentImg">
    @using (Html.BeginForm("DodajTrening", "Home", FormMethod.Post))
    {
        @Html.ValidationSummary(true)
        @Html.HiddenFor(x => x.TreningId)
    <h2 class="green">Novi trening - @Model.ClanIme @Model.ClanPrezime</h2>
    <div id="inputAreaImgsTrening" style="float: left;">
        <div>
            <div class="marginInputBottom">@Html.Label("Ime treninga", new { @class = "smallFont" })</div>
            @Html.TextBoxFor(x => x.TreningImeTreninga)
            @Html.ValidationMessageFor(model => model.TreningImeTreninga, String.Empty, new { @class = "error" })
        </div>

        <div class="marginText">
            <div class="marginInputBottom">@Html.Label("Tip treninga", new { @class = "smallFont marginInputBottom" })</div>
            @Html.TextBoxFor(x => x.TreningTip)
            @Html.ValidationMessageFor(model => model.TreningTip, String.Empty, new { @class = "error" })
        </div>

        <div class="marginText">
            <div class="marginInputBottom">@Html.Label("Datum treninga", new { @class = "smallFont marginInputBottom" })</div>
            @Html.TextBoxFor(x => x.TreningDatum, "{0:dd/MM/yyyy}", new { @Value = DateTime.Now.ToString("dd/MM/yyyy") })
            @Html.ValidationMessageFor(model => model.TreningDatum, String.Empty, new { @class = "error" })
        </div>

        <div class="marginText">
            <div class="marginInputBottom">@Html.Label("Napomena", new { @class = "smallFont marginInputBottom" })</div>
            @Html.TextAreaFor(x => x.Napomena, new { rows = "10", cols = "40" })
            @Html.ValidationMessageFor(model => model.Napomena, String.Empty, new { @class = "error" })
        </div>

        <div class="marginHeadlineTop marginTextBottom">
            <input type="submit" value="Dodaj trening" class="button_example" />
        </div>

        @Html.ActionLink("Popis treninga", "TreningPopis", "Home", new { id = Model.ClanId }, new { @class = "marginHeadlineTop marginTextBottom button_example" })
    </div>
    }

    <div id="inputAreaTrening" style="float: left;">
        <!--Zagrijavanje-->
        <h2 class="green">Zagrijavanje</h2>
        <table class="responstableTrening">
            @if (Model.ListaZagrijavanja == null)
            {
                <tr>
                    <td class="smallFont">Trenutno nema zagrijavanja.</td>
                </tr>
            }
            else if (Model.ListaZagrijavanja.ToList().Count == 0)
            {
                <tr>
                    <td class="smallFont">Trenutno nema zagrijavanja.</td>
                </tr>
            }
            else
            {
                <tr style="background-color:#C6C8C8;">
                    <td class="treningFont">Naziv</td>
                    <td class="treningFont">Puls</td>
                    <td class="treningFont">Tempo</td>
                    <td class="treningFont">Napomena</td>
                </tr>
                foreach (var zagrijavanje in Model.ListaZagrijavanja)
                {
                    using (Html.BeginForm("SpremiZagrijavanjeInfo", "Home", FormMethod.Post))
                    {
                        <tr class="smallFont">
                            @Html.Hidden("id", Model.TreningId)
                            @Html.Hidden("ZagrijavanjeId", zagrijavanje.ZagrijavanjeId)
                            <td>@zagrijavanje.Naziv</td>
                            <td>@Html.TextBox("Puls", zagrijavanje.Puls, new { @class = "marginInputBottom inputNumber" })</td>
                            <td>@Html.TextBox("Tempo", zagrijavanje.Tempo, new { @class = "marginInputBottom inputNumber" })</td>
                            <td>@Html.TextBox("ZagrijavanjeNapomena", zagrijavanje.ZagrijavanjeNapomena, new { @class = "marginInputBottom inputNumber" })</td>
                            <td>@Html.ActionLink("Izbriši", "IzbrisiZagrijavanjeTrening", "Home", new { id = zagrijavanje.ZagrijavanjeId }, new { @class = "button_example_br", onclick = "return confirm('Jeste li sigurni da zelite izbrisati zagrijavanje?');" })</td>
                            <td>@Html.ActionLink("Detalji", "DetaljiZagrijavanja", "Home", new { id = zagrijavanje.ZagrijavanjePopisZagrijavanjeId, izmijeni = 0, trening = 1, treningId = Model.TreningId }, new { @class = "button_example_br" })</td>
                            <td><input type="submit" name="SpremiZagrijavanjeInfo" value="Spremi" class="button_example_br" /></td>
                        </tr>
                    }
                }
            }
        </table>
        @Html.ActionLink("Dodaj zagrijavanje", "DodajZagrijavanjeTrening", "Home", new { id = Model.TreningId }, new { @class = "marginHeadlineTop marginTextBottom button_example" })

        <!--Vjezbe-->
        <h2 class="green marginHeadlineTop">Vježbe</h2>

        @if (Model.SekcijaVjezbi == null)
        {
            <table class="responstableTrening">
                <tr>
                    <td class="smallFont">Trenutno nema vježbi.</td>
                </tr>
            </table>
        }
        else if (Model.SekcijaVjezbi.ToList().Count == 0)
        {
            <table class="responstableTrening">
                <tr>
                    <td class="smallFont">Trenutno nema vježbi.</td>
                </tr>
            </table>
        }
        else
        {
            int i = 1;
            foreach (var item in Model.SekcijaVjezbi)
            {
                <div class="treningFont">Sekcija @i</div>
                <table class="responstableTrening">
                    <tr style="background-color:#C6C8C8;">
                        <td class="treningFont">Naziv</td>
                        <td class="treningFont">Broj ponavljanja</td>
                        <td class="treningFont">Broj serija</td>
                        <td class="treningFont">Težina</td>
                        <td class="treningFont">Odmor</td>
                        @using (Html.BeginForm("SpremiBrojKrugova", "Home", FormMethod.Post))
                        {
                            @Html.Hidden("id", Model.TreningId)
                            @Html.Hidden("sekcijaId", item.SekcijaId)
                            <td style="background-color: white; border:none;">
                                @Html.Label("Broj krugova:", new { @class = "treningFont" })
                                @Html.TextBox("brojKrugova", item.BrojKrugova, new { @class = "inputNumber" })
                            </td>
                            <td style="background-color: white; border:none;">
                                <input type="submit" name="SpremiBrojKrugova" value="Spremi broj krugova" class="button_example_small" />
                            </td>
                        }
                    </tr>
                    @foreach (var vjezba in item.Vjezba)
                        {
                            using (Html.BeginForm("SpremiVjezbuInfo", "Home", FormMethod.Post))
                            {
                                <tr class="smallFont">
                                    @Html.Hidden("id", Model.TreningId)
                                    @Html.Hidden("VjezbaId", vjezba.VjezbaId)
                                    <td>@vjezba.ImeVjezbe</td>
                                    <td>@Html.TextBox("brojPonavljanja", vjezba.BrojPonavljanja, new { @class = "marginInputBottom inputNumber" })</td>
                                    <td>@Html.TextBox("brojSerija", vjezba.BrojSerija, new { @class = "marginInputBottom inputNumber" })</td>
                                    <td>@Html.TextBox("Tezina", vjezba.Kilogrami, new { @class = "marginInputBottom inputNumber" })</td>
                                    <td>@Html.TextBox("Odmor", vjezba.Odmor, new { @class = "marginInputBottom inputNumber" })</td>
                                    <td>@Html.ActionLink("Izbriši", "IzbrisiVjezbuTrening", "Home", new { id = vjezba.VjezbaId }, new { @class = "button_example_br", onclick = "return confirm('Jeste li sigurni da zelite izbrisati vjezbu?');" })</td>
                                    <td>@Html.ActionLink("Detalji", "DetaljiVjezbe", "Home", new { id = vjezba.VjezbePopisVjezbeId, izmijeni = 0, trening = 1, treningId = Model.TreningId }, new { @class = "button_example_br" })</td>

                                    <td><input type="submit" name="SpremiVjezbuInfo" value="Spremi" class="button_example_br" /></td>
                                </tr>
                            }
                        }
                    </table>
                
            @Html.ActionLink("Dodaj vježbu", "DodajVjezbuTrening", "Home", new { id = item.SekcijaId, id1 = Model.TreningId.ToString() }, new { @class = "marginHeadlineTop marginTextBottom button_example" })
            @Html.ActionLink("Izbriši sekciju vježbi", "IzbrisiSekcijuVjezbi", "Home", new { id = item.SekcijaId }, new { @class = "marginLeft marginHeadlineTop marginTextBottom button_example", onclick = "return confirm('Jeste li sigurni da zelite izbrisati sekciju vjezbi?');" })
            <hr />i++;
            }
        }
        <br />
        @Html.ActionLink("Dodaj sekciju vježbi", "DodajSekcijuTrening", "Home", new { id = Model.TreningId }, new { @class = "marginHeadlineTop marginTextBottom button_example" })

        <!--Istezanje-->
        <h2 class="green marginHeadlineTop">Istezanje</h2>
        <table class="responstableTrening">
            @if (Model.ListaIstezanja == null)
            {
                <tr>
                    <td class="smallFont">Trenutno nema istezanja.</td>
                </tr>
            }
            else if (Model.ListaIstezanja.ToList().Count == 0)
            {
                <tr>
                    <td class="smallFont">Trenutno nema istezanja.</td>
                </tr>
            }
            else
            {
                <tr style="background-color:#C6C8C8;">
                    <td class="treningFont">Naziv</td>
                    <td class="treningFont">Vrijeme izdržaja</td>
                    <td class="treningFont">Vrsta istezanja</td>
                </tr>
                foreach (var istezanje in Model.ListaIstezanja)
                {
                    using (Html.BeginForm("SpremiIstezanjeInfo", "Home", FormMethod.Post))
                    {
                        <tr class="smallFont">
                            @Html.Hidden("id", Model.TreningId)
                            @Html.Hidden("IstezanjeId", istezanje.IstezanjeId)
                            <td>@istezanje.Naziv</td>
                            <td>@Html.TextBox("vrijemeIzdrzaja", istezanje.VrijemeIzdrzaja, new { @class = "marginInputBottom inputNumber" })</td>
                            <td>@Html.TextBox("vrstaIstezanja", istezanje.VrstaIstezanja, new { @class = "marginInputBottom inputNumber" })</td>

                            <td>@Html.ActionLink("Izbriši", "IzbrisiIstezanjeTrening", "Home", new { id = istezanje.IstezanjeId }, new { @class = "button_example_br", onclick = "return confirm('Jeste li sigurni da zelite izbrisati istezanje?');" })</td>
                            <td>@Html.ActionLink("Detalji", "DetaljiIstezanja", "Home", new { id = istezanje.IstezanjePopisIstezanjeId, izmijeni = 0, trening = 1, treningId = Model.TreningId }, new { @class = "button_example_br" })</td>

                            <td><input type="submit" name="SpremiIstezanjeInfo" value="Spremi" class="button_example_br" /></td>
                        </tr>
                    }
                }
            }
        </table>
        @Html.ActionLink("Dodaj istezanje", "DodajIstezanjeTrening", "Home", new { id = Model.TreningId }, new { @class = "marginHeadlineTop marginTextBottom button_example" })
    </div>
</div>